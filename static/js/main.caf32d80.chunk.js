(this.webpackJsonpcalculator=this.webpackJsonpcalculator||[]).push([[0],{13:function(t,e,s){},14:function(t,e,s){},16:function(t,e,s){"use strict";s.r(e);var a=s(1),u=s.n(a),o=s(5),l=s.n(o),r=(s(13),s(2)),i=s(3),n=s(8),c=s(7),h=(s(14),{buttons:[{value:"C",type:"operation",color:"bright"},{value:"(",type:"symbol",color:"bright"},{value:")",type:"symbol",color:"bright"},{value:"/",type:"sign",color:"bright"},{value:"7",type:"symbol",color:"default"},{value:"8",type:"symbol",color:"default"},{value:"9",type:"symbol",color:"default"},{value:"*",type:"sign",color:"bright"},{value:"4",type:"symbol",color:"default"},{value:"5",type:"symbol",color:"default"},{value:"6",type:"symbol",color:"default"},{value:"-",type:"sign",color:"bright"},{value:"1",type:"symbol",color:"default"},{value:"2",type:"symbol",color:"default"},{value:"3",type:"symbol",color:"default"},{value:"+",type:"sign",color:"bright"},{value:"^",type:"sign",color:"bright"},{value:"0",type:"symbol",color:"default"},{value:".",type:"symbol",color:"default"},{value:"=",type:"operation",color:"default"}]}),p=function(){function t(e){Object(r.a)(this,t),this.expression=e}return Object(i.a)(t,[{key:"reorganizeArray",value:function(t){for(var e=[],s=-1;++s<t.length;)!1!==t[s]&&e.push(t[s]);return e}},{key:"mergeMinusesForOp",value:function(t,e){for(var s=0;"-"===t[e];)t[e]=!1,e++,s++;return s%2!==0&&(t[e]*=-1),this.reorganizeArray(t)}},{key:"mergeMinuses",value:function(t){var e=0;return t=this.mergeMinusesForOp(t,e),e+=2,t=this.mergeMinusesForOp(t,e),this.reorganizeArray(t)}},{key:"doTheMath",value:function(t,e){var s=t-1,a=t+1,u=e[s],o=e[a];switch(e[t]){case"^":e[a]=Math.pow(parseFloat(u),parseFloat(o));break;case"*":e[a]=parseFloat(u)*parseFloat(o);break;case"/":if(0===parseFloat(o))return NaN;e[a]=parseFloat(u)/parseFloat(o);break;case"+":e[a]=parseFloat(u)+parseFloat(o);break;case"-":e[a]=parseFloat(u)-parseFloat(o);break;default:return NaN}return e[t]=!1,e[s]=!1,this.reorganizeArray(e)}},{key:"calculate",value:function(t){if(t.indexOf("(")>=0||t.indexOf(")")>=0)return NaN;var e=t.match(/([0-9]+\.[0-9]+)|([0-9]+)|\+|-|\^|\*|\//g),s=-1;if(console.log(e),!e)return t;if(0===e.length)return t;if(1===e.length)return e[0];for(e=this.mergeMinuses(e);s++<e.length-1;)"^"===e[s]&&(e=this.doTheMath(s,e),s--);for(s=-1;s++<e.length-1;)"*"===e[s]&&(e=this.doTheMath(s,e),s--),"/"===e[s]&&(e=this.doTheMath(s,e),s--);for(s=-1;s++<e.length-1;)"+"===e[s]&&(e=this.doTheMath(s,e),s--),"-"===e[s]&&(e=this.doTheMath(s,e),s--);return e[0]}},{key:"calculateFull",value:function(t){var e=t=t.replace(/ /g,"");if(null!==t.match(/[0-9]\(/gim)||t.match(/\)[0-9]/gim))return NaN;var s,a=t.match(/\(([^()]+)\)/gim);if(!a)return this.calculate(t);for(var u=0;u<a.length;u++){s=a[u].replace(/\(|\)/g,"");var o=this.calculate(s);console.log("Replacing ("+s+") by "+o),e=e.replace("("+s+")",o)}return e.indexOf("(")>=0&&e.indexOf(")")>e.indexOf("(")?this.calculateFull(e):e.indexOf("(")>=0||e.indexOf(")")>=0?NaN:(console.log("String after subcalculations are done: "+e),this.calculate(e))}}]),t}(),f=function(){function t(){Object(r.a)(this,t)}return Object(i.a)(t,[{key:"setProps",value:function(t,e,s){this.item=t,this.output={value:e,classList:s.split(" "),focus:!0}}},{key:"handleOutput",value:function(t){t.value=this.output.value;var e=this.output.classList;t.classList=[];for(var s=0;s<e.length;s++)t.classList.add(e[s]);return t.focus&&t.blur(),t}},{key:"remove",value:function(t,e){var s=t.indexOf(e);return s>-1&&t.splice(s,1),t}},{key:"tape",value:function(){switch(this.item.type){case"operation":this.tapeOperation(this.item.value);break;case"symbol":this.tapeSymbol(this.item.value);break;case"sign":this.tapeSign(this.item.value)}}},{key:"tapeSign",value:function(t){var e=t,s=this.output.value,a=this.output.value;"ERROR"===s||this.output.classList.includes("result")?"ERROR"!==s?(a=s+e,this.output.classList=this.remove(this.output.classList,"result")):(a=e,this.output.classList=this.remove(this.output.classList,"result"),this.output.classList=this.remove(this.output.classList,"blocked")):a="0"===s&&"-"===t?e:s+e,this.output.value=a}},{key:"tapeSymbol",value:function(t){var e=t,s=this.output.value,a=this.output.value;"ERROR"===s||this.output.classList.includes("result")?(a=e,this.output.classList=this.remove(this.output.classList,"result"),this.output.classList=this.remove(this.output.classList,"blocked")):a="."!==t?("0"===s?"":s)+e:s+e,this.output.value=a}},{key:"tapeOperation",value:function(t){var e=t,s=this.output.value,a=this.output.value;if("C"===e)a="",this.output.classList=this.remove(this.output.classList,"result"),this.output.classList=this.remove(this.output.classList,"blocked");else if("ERROR"!==s&&"="===e){var u=new p(s),o=u.calculateFull(u.expression);isNaN(parseFloat(o))?(a="ERROR",this.output.classList.push("blocked"),this.output.focus=!1):(a=o,this.output.classList.push("result"))}else"T"===e&&document.body.classList.toggle("dark");this.output.value=a}}]),t}(),v=s(6),y=s.n(v),d=s(0),b=function(t){Object(n.a)(s,t);var e=Object(c.a)(s);function s(){var t;return Object(r.a)(this,s),(t=e.call(this)).state={out:"",tapeEngine:new f},t.refOutput=u.a.createRef(),t.refButtons=u.a.createRef(),t}return Object(i.a)(s,[{key:"componentDidMount",value:function(){Array.from(this.refButtons.current.querySelectorAll("button")).forEach((function(t){return t.style.height=t.offsetWidth+"px"}))}},{key:"componentDidUpdate",value:function(){Array.from(this.refButtons.current.querySelectorAll("button")).forEach((function(t){return t.style.height=t.offsetWidth+"px"}))}},{key:"onKeyPress",value:function(t){"Enter"===t.key&&this.onButtonClick({value:"=",type:"operation",color:"default"})}},{key:"onButtonClick",value:function(t){var e=this.refOutput.current;this.state.tapeEngine.setProps(t,e.value,e.className),this.state.tapeEngine.tape(),e=this.state.tapeEngine.handleOutput(e)}},{key:"render",value:function(){var t=this;return Object(d.jsxs)("div",{className:"calculator",children:[Object(d.jsx)("div",{className:"calculator-result",children:Object(d.jsx)("input",{ref:this.refOutput,onKeyPress:function(e){t.onKeyPress(e)},className:"calculator-result-expression",defaultValue:this.state.out,id:"input",placeholder:"0"})}),Object(d.jsx)("div",{ref:this.refButtons,className:"calculator-buttons",children:h.buttons.map((function(e){return Object(d.jsx)("button",{className:y()(e.type,e.color),onClick:function(){t.onButtonClick(e)},children:e.value},e.value)}))})]})}}]),s}(u.a.Component),g=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,17)).then((function(e){var s=e.getCLS,a=e.getFID,u=e.getFCP,o=e.getLCP,l=e.getTTFB;s(t),a(t),u(t),o(t),l(t)}))};l.a.render(Object(d.jsx)(u.a.StrictMode,{children:Object(d.jsx)(b,{})}),document.getElementById("root")),g()}},[[16,1,2]]]);
//# sourceMappingURL=main.caf32d80.chunk.js.map